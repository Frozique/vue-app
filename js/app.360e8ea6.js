(function(){"use strict";var t={5071:function(t,e,a){var r=a(9242),o=a(3396);const s={class:"header"},l={class:"header__wrapper container"},c=(0,o._)("span",{class:"header__info"},"Каталог",-1),i=(0,o._)("img",{src:"img/svg/logo-tech.svg",alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"},null,-1),n=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),d=(0,o.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div></footer>',1);function u(t,e,a,r,u,_){const p=(0,o.up)("router-link"),m=(0,o.up)("cartIndicator"),h=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("header",s,[(0,o._)("div",l,[c,(0,o.Wm)(p,{class:"header__logo",to:{name:"main"}},{default:(0,o.w5)((()=>[i])),_:1}),n,(0,o.Wm)(m)])]),(0,o.Wm)(h),d])}var _=a(7139);const p={key:0,class:"loader",id:"loader-1"},m={key:1},h=(0,o._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),f={class:"header__count","aria-label":"Количество товаров"};function g(t,e,a,r,s,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(c,{class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,o.w5)((()=>[t.$store.state.cartLoading?((0,o.wg)(),(0,o.iD)("div",p)):t.$store.state.cartLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",m,[h,(0,o._)("span",f,(0,_.zw)(t.$store.state.cartProducts.length),1)]))])),_:1})}var b={},v=a(89);const y=(0,v.Z)(b,[["render",g]]);var k=y,w=a(65),P={components:{cartIndicator:k},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.$store.dispatch("loadCart")},methods:{...(0,w.nv)(["loadCart"]),...(0,w.OI)(["updateUserAccessKey"])}};const I=(0,v.Z)(P,[["render",u]]);var C=I,D=a(2483);const x={class:"content container"},z=(0,o._)("div",{class:"content__top content__top--catalog"},[(0,o._)("h1",{class:"content__title"}," Каталог "),(0,o._)("span",{class:"content__info"}," 152 товара ")],-1),F={class:"content__catalog"},T={class:"catalog"},$={key:0,class:"loader",id:"loader-1"},A={key:1,class:"loading__text"},U={key:2};function L(t,e,a,s,l,c){const i=(0,o.up)("productFilter"),n=(0,o.up)("productList"),d=(0,o.up)("BasePagination");return(0,o.wg)(),(0,o.iD)("main",x,[z,(0,o._)("div",F,[(0,o.Wm)(i,{"price-from":l.filterPriceFrom,"onUpdate:price-from":e[0]||(e[0]=t=>l.filterPriceFrom=t),"price-to":l.filterPriceTo,"onUpdate:price-to":e[1]||(e[1]=t=>l.filterPriceTo=t),"category-id":l.filterCategoryId,"onUpdate:category-id":e[2]||(e[2]=t=>l.filterCategoryId=t),"color-id":l.filterProductColorId,"onUpdate:color-id":e[3]||(e[3]=t=>l.filterProductColorId=t)},null,8,["price-from","price-to","category-id","color-id"]),(0,o._)("section",T,[l.productsLoading?((0,o.wg)(),(0,o.iD)("div",$)):(0,o.kq)("",!0),l.productsLoading?((0,o.wg)(),(0,o.iD)("div",A,"Загрузка товаров...")):(0,o.kq)("",!0),l.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",U,[(0,o.Uk)("Произошла ошибка при загрузке товаров "),(0,o._)("button",{onClick:e[4]||(e[4]=(0,r.iM)((t=>c.loadProducts()),["prevent"]))},"Попробовать еще раз")])):(0,o.kq)("",!0),(0,o.Wm)(n,{products:c.products},null,8,["products"]),(0,o.Wm)(d,{modelValue:l.page,"onUpdate:modelValue":e[5]||(e[5]=t=>l.page=t),count:c.countProducts,"per-page":l.productsPerPage},null,8,["modelValue","count","per-page"])])])])}const V={class:"catalog__list"};function E(t,e,a,r,s,l){const c=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",V,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.products,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.id,product:t},null,8,["product"])))),128))])}const K={class:"catalog-item"},S=["src","alt"],Z={class:"catalog__title"},M={href:"#"},O={class:"catalog__price"},W={class:"colors colors--black"},B={class:"colors__label"},q=["value"];function j(t,e,a,s,l,c){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("li",K,[(0,o.Wm)(i,{class:"catalog__pic",to:{name:"product",params:{id:a.product.id}}},{default:(0,o.w5)((()=>[(0,o._)("img",{src:a.product.image,alt:a.product.title},null,8,S)])),_:1},8,["to"]),(0,o._)("h3",Z,[(0,o._)("a",M,(0,_.zw)(a.product.title),1)]),(0,o._)("span",O,(0,_.zw)(c.PricePretty)+" ₽ ",1),(0,o._)("ul",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.product.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.code},[(0,o._)("label",B,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",value:t,"onUpdate:modelValue":e[0]||(e[0]=t=>l.productColor=t)},null,8,q),[[r.G2,l.productColor]]),(0,o._)("span",{class:"colors__value",style:(0,_.j5)({"background-color":`${t.code}`})},null,4)])])))),128))])])}var Y={};function H(t,e){Y.$emit("goToPage",t,e)}function N(t){return(new Intl.NumberFormat).format(t)}var G={data(){return{productColor:this.product.colors[0]}},computed:{PricePretty(){return N(this.product.price)}},methods:{goToPage:H},props:["product"]};const Q=(0,v.Z)(G,[["render",j]]);var R=Q,X={name:"ProductsList",components:{ProductItem:R},props:["products"]};const J=(0,v.Z)(X,[["render",E]]);var tt=J;const et={class:"catalog__pagination pagination"},at={class:"pagination__item"},rt=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),ot=[rt],st=["onClick"],lt={class:"pagination__item"},ct=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),it=[ct];function nt(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("ul",et,[(0,o._)("li",at,[1!==c.page?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===c.page}]),"aria-label":"Предыдущая страница",onClick:e[0]||(e[0]=(0,r.iM)((t=>c.paginate(c.page-1)),["prevent"]))},ot,2)):(0,o.kq)("",!0)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t},[(0,o._)("a",{href:"#",class:(0,_.C_)(["pagination__link",{"pagination__link--current":t===c.page}]),onClick:(0,r.iM)((e=>c.paginate(t)),["prevent"])},(0,_.zw)(t),11,st)])))),128)),(0,o._)("li",lt,[c.page!==c.pages?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"#",class:(0,_.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":c.page===c.pages}]),"aria-label":"Следующая страница",onClick:e[1]||(e[1]=(0,r.iM)((t=>c.paginate(c.page+1)),["prevent"]))},it,2)):(0,o.kq)("",!0)])])}var dt={props:["modelValue","count","perPage"],computed:{page(){return this.modelValue},pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){this.$emit("update:modelValue",t)}}};const ut=(0,v.Z)(dt,[["render",nt]]);var _t=ut;const pt={class:"filter"},mt=(0,o._)("h2",{class:"filter__title"},"Фильтры",-1),ht={class:"form__block"},ft=(0,o._)("legend",{class:"form__legend"},"Цена",-1),gt={class:"form__label form__label--price"},bt=(0,o._)("span",{class:"form__value"},"От",-1),vt={class:"form__label form__label--price"},yt=(0,o._)("span",{class:"form__value"},"До",-1),kt={class:"form__block"},wt=(0,o._)("legend",{class:"form__legend"},"Категория",-1),Pt={class:"form__label form__label--select"},It=(0,o._)("option",{value:"0"},"Все категории",-1),Ct=["value"],Dt={class:"form__block"},xt=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),zt={class:"colors"},Ft={class:"colors__label"},Tt=["value"],$t=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ</legend><ul class="check-list"><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="8" checked="true"><span class="check-list__desc"> 8 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="16"><span class="check-list__desc"> 16 <span>(461)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="32"><span class="check-list__desc"> 32 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="64"><span class="check-list__desc"> 64 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="128"><span class="check-list__desc"> 128 <span>(313)</span></span></label></li><li class="check-list__item"><label class="check-list__label"><input class="check-list__check sr-only" type="checkbox" name="volume" value="264"><span class="check-list__desc"> 264 <span>(313)</span></span></label></li></ul></fieldset><button class="filter__submit button button--primery" type="submit"> Применить </button>',2);function At(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("aside",pt,[mt,(0,o._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>c.submit&&c.submit(...t)),["prevent"]))},[(0,o._)("fieldset",ht,[ft,(0,o._)("label",gt,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>l.currentPriceFrom=t)},null,512),[[r.nr,l.currentPriceFrom,void 0,{number:!0}]]),bt]),(0,o._)("label",vt,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>l.currentPriceTo=t)},null,512),[[r.nr,l.currentPriceTo,void 0,{number:!0}]]),yt])]),(0,o._)("fieldset",kt,[wt,(0,o._)("label",Pt,[(0,o.wy)((0,o._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>l.currentCategoryId=t)},[It,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.categories,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id,key:t.id},(0,_.zw)(t.title),9,Ct)))),128))],512),[[r.bM,l.currentCategoryId]])])]),(0,o._)("fieldset",Dt,[xt,(0,o._)("ul",zt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.colorId},[(0,o._)("label",Ft,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:t.colorId,"onUpdate:modelValue":e[3]||(e[3]=t=>l.currentColorId=t),checked:"true"},null,8,Tt),[[r.G2,l.currentColorId]]),(0,o._)("span",{class:"colors__value",style:(0,_.j5)({"background-color":t.color})},null,4)])])))),128))])]),$t,(0,o._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[4]||(e[4]=(0,r.iM)((t=>c.reset()),["prevent"]))}," Сбросить ")],32)])}const Ut="https://vue-study.skillbox.cc";var Lt=a(70),Vt=[{colorId:1,color:"#9200e0"},{colorId:5,color:"#73B6EA"},{colorId:2,color:"#FFBE15"},{colorId:6,color:"#939393"},{colorId:4,color:"#8BE000"},{colorId:8,color:"#e60039"},{colorId:9,color:"#fafafa"},{colorId:3,color:"#000"}],Et={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,categoriesData:null}},props:["priceFrom","priceTo","categoryId","colorId"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return Vt}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},colorId(t){this.currentColorId=t}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",0)},loadCategories(){Lt.ZP.get(`${Ut}/api/productCategories`).then((t=>this.categoriesData=t.data))}},created(){this.loadCategories()}};const Kt=(0,v.Z)(Et,[["render",At]]);var St=Kt,Zt={components:{productList:tt,BasePagination:_t,productFilter:St},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterProductColorId:0,page:1,productsPerPage:6,productsData:null,productsLoading:!0,productsLoadingFailed:!0}},computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t,image:t.image.file.url}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Lt.ZP.get(`${Ut}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,colorId:this.filterProductColorId}}).then((t=>this.productsData=t.data)).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))}),1e3)}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterProductColorId(){this.loadProducts()}},created(){this.loadProducts()}};const Mt=(0,v.Z)(Zt,[["render",L]]);var Ot=Mt;function Wt(t,e,a,r,s,l){return(0,o.wg)(),(0,o.iD)("h1",null,"Страница не найдена")}var Bt={};const qt=(0,v.Z)(Bt,[["render",Wt]]);var jt=qt;const Yt={key:0,class:"content container"},Ht=(0,o._)("div",{class:"loader",id:"loader-1"},null,-1),Nt=(0,o._)("div",{class:"loading__text"},"Загрузка товара...",-1),Gt=[Ht,Nt],Qt={key:1,class:"content container"},Rt={key:2,class:"content container"},Xt={class:"content__top"},Jt={class:"breadcrumbs"},te={class:"breadcrumbs__item"},ee={class:"breadcrumbs__item"},ae={class:"breadcrumbs__item"},re={class:"breadcrumbs__link"},oe={class:"item"},se={class:"item__pics pics"},le={class:"pics__wrapper"},ce=["src","alt"],ie={class:"item__info"},ne={class:"item__code"},de={class:"item__title"},ue={class:"item__form"},_e={class:"item__price"},pe=(0,o.uE)('<fieldset class="form__block"><legend class="form__legend">Цвет:</legend><ul class="colors"><li class="colors__item"><label class="colors__label"><input class="colors__radio sr-only" type="radio" name="color-item" value="blue" checked="true"><span class="colors__value" style="background-color:#73B6EA;"></span></label></li><li class="colors__item"><label class="colors__label"><input class="colors__radio sr-only" type="radio" name="color-item" value="yellow"><span class="colors__value" style="background-color:#FFBE15;"></span></label></li><li class="colors__item"><label class="colors__label"><input class="colors__radio sr-only" type="radio" name="color-item" value="gray"><span class="colors__value" style="background-color:#939393;"></span></label></li></ul></fieldset><fieldset class="form__block"><legend class="form__legend">Объемб в ГБ:</legend><ul class="sizes sizes--primery"><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="32"><span class="sizes__value"> 32gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="64"><span class="sizes__value"> 64gb </span></label></li><li class="sizes__item"><label class="sizes__label"><input class="sizes__radio sr-only" type="radio" name="sizes-item" value="128" checked="true"><span class="sizes__value"> 128gb </span></label></li></ul></fieldset>',2),me={class:"item__row"},he={class:"form__counter"},fe=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),ge=[fe],be=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),ve=[be],ye=["disabled"],ke=(0,o.uE)('<div class="item__desc"><ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Описание </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Характеристики </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Гарантия </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Оплата и доставка </a></li></ul><div class="item__content"><p> Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br> Синхронизация со смартфоном<br> Связь по Bluetooth Smart, ANT+ и Wi-Fi<br> Поддержка сторонних приложений<br></p><a href="#"> Все характеристики </a><h3>Что это?</h3><p> Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. </p><h3>Дизайн</h3><p> Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. </p></div></div>',1);function we(t,e,a,s,l,c){const i=(0,o.up)("router-link");return l.productLoading?((0,o.wg)(),(0,o.iD)("main",Yt,Gt)):l.productData?((0,o.wg)(),(0,o.iD)("main",Rt,[(0,o._)("div",Xt,[(0,o._)("ul",Jt,[(0,o._)("li",te,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",ee,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,_.zw)(c.category.title),1)])),_:1})]),(0,o._)("li",ae,[(0,o._)("a",re,(0,_.zw)(c.product.title),1)])])]),(0,o._)("section",oe,[(0,o._)("div",se,[(0,o._)("div",le,[(0,o._)("img",{width:"570",height:"570",src:c.product.image.file.url,alt:c.product.title},null,8,ce)])]),(0,o._)("div",ie,[(0,o._)("span",ne,"Артикул: "+(0,_.zw)(c.product.id),1),(0,o._)("h2",de,(0,_.zw)(c.product.title),1),(0,o._)("div",ue,[(0,o._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[3]||(e[3]=(0,r.iM)(((...t)=>c.addToCart&&c.addToCart(...t)),["prevent"]))},[(0,o._)("b",_e,(0,_.zw)(c.pricePretty)+" ₽ ",1),pe,(0,o._)("div",me,[(0,o._)("div",he,[(0,o._)("button",{type:"button",onClick:e[0]||(e[0]=(0,r.iM)((t=>l.productAmount-=1),["prevent"])),"aria-label":"Убрать один товар"},ge),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.productAmount=t)},null,512),[[r.nr,l.productAmount,void 0,{number:!0}]]),(0,o._)("button",{type:"button",onClick:e[2]||(e[2]=(0,r.iM)((t=>l.productAmount+=1),["prevent"])),"aria-label":"Добавить один товар"},ve)]),(0,o._)("button",{class:"button button--primery",type:"submit",disabled:l.productAddSending}," В корзину ",8,ye)]),(0,o.wy)((0,o._)("div",null,"Товар добавлен в корзину",512),[[r.F8,l.productAdded]]),(0,o.wy)((0,o._)("div",null,"Добавляем товар в корзину...",512),[[r.F8,l.productAddSending]])],32)])]),ke])])):((0,o.wg)(),(0,o.iD)("main",Qt,"Не удалось загрузить товар"))}var Pe={data(){return{productAmount:1,productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1}},computed:{pricePretty(){return N(this.product.price)},product(){return this.productData},category(){return this.productData.category}},methods:{...(0,w.nv)(["addProductToCart"]),goToPage:H,addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,amount:this.productAmount}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,Lt.ZP.get(`${Ut}/api/products/${this.$route.params.id}`).then((t=>this.productData=t.data)).catch((()=>this.productLoadingFailed=!0)).then((()=>this.productLoading=!1))}},created(){this.loadProduct()},beforeRouteUpdate(){this.loadProduct()}};const Ie=(0,v.Z)(Pe,[["render",we]]);var Ce=Ie;const De={class:"content container"},xe={class:"content__top"},ze={class:"breadcrumbs"},Fe={class:"breadcrumbs__item"},Te=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),$e=(0,o._)("h1",{class:"content__title"}," Корзина ",-1),Ae={class:"content__info"},Ue={class:"cart"},Le={class:"cart__form form",action:"#",method:"POST"},Ve={class:"cart__field"},Ee={class:"cart__list"},Ke={key:0},Se=(0,o._)("div",{class:"loader",id:"loader-1"},null,-1),Ze=(0,o._)("div",{class:"loading__text"},"Загрузка корзины",-1),Me=[Se,Ze],Oe={key:1,class:"loading__text"},We=(0,o._)("svg",{id:"svg8",viewBox:"0 0 7.5567667 7.5567669",xmlns:"http://www.w3.org/2000/svg","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:cc":"http://creativecommons.org/ns#","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:svg":"http://www.w3.org/2000/svg"},[(0,o._)("g",{id:"layer18",transform:"translate(-.529 -.529)"},[(0,o._)("path",{id:"LINE-1",d:"m.92526669.52890791c-.21762005-.00000265-.39635535.18080302-.39635826.39842545v3.17396544c.00000291.2176198.17873821.3963591.39635826.3963591h4.76405011c.217619-.0000027.3963554-.1787393.3963583-.3963591v-3.17396544c-.0000029-.21761979-.1787393-.39842545-.3963583-.39842545zm0 .26561521h4.76405011c.07463.00000264.1328074.0581766.1328084.13281024v3.17396544c-.000001.074628-.058176.1328076-.1328084.1328076h-4.76405011c-.07463 0-.13074147-.058174-.13074147-.1328076v-3.17396544c0-.074631.0561123-.13281024.13074147-.13281024zm1.23041541.57209768-.1710486.1710111-.1705322-.1710505c-.1479292-.1320561-.3047865.0755811-.1875856.1875869l.1710492.1710478-.1710492.1710479c-.135753.1249528.063006.3231667.1875856.187071l.1705322-.1710505.1710489.1710505c.1246186.1147042.3019471-.0621378.1875856-.187071l-.1710492-.1710479.1710492-.1710478c.1323514-.1562374-.081132-.3023076-.1875859-.1875475zm2.6468671 0-.1720824.1720429-.1720826-.1720823c-.1665503-.1374083-.300585.0897315-.1855182.1875869l.1710489.1710478-.1710489.1710479c-.1495912.1229814.0612942.335632.1855182.187071l.1720826-.172085.1720826.172085c.1242239.1485617.3351102-.0640897.1855181-.187071l-.1710488-.1710479.1710488-.1710478c.1301779-.1552604-.0789945-.2996127-.1855183-.1875475zm-3.3481135 1.8149024c-.0718525.0008442-.1298952.0588853-.1307414.1307378v.5291667c-.0002477.072635.058109.1318876.1307391.1327468h.7953001c.073463.0002801.1330881-.059344.1328084-.1328077v-.396359h2.7770915c.1921877.017262.1921877-.2808112 0-.2635488zm.132806.2634846h.5296834v.2656178h-.5296834zm1.1916585 1.5818167c-.4045636.0120961-.6557226.3611676-.6619751.6619743v.2640674c-.0002797.073463.059345.1330877.1328084.1328076h2.1171834c.072655-.000858.1310226-.060148.1307415-.1328076v-.2640674c-.0191754-.3881073-.3520453-.6509995-.6599082-.6619743zm0 .2656152h1.05885c.2183844.00404.386424.2091305.3963583.3963591v.1328076h-1.8515666c-.0421913-.3567696.2205724-.5219877.3963583-.5291667z","font-variant-ligatures":"normal","font-variant-position":"normal","font-variant-caps":"normal","font-variant-numeric":"normal","font-variant-alternates":"normal","font-feature-settings":"normal","text-indent":"0","text-align":"start","text-decoration-line":"none","text-decoration-style":"solid","text-decoration-color":"rgb(0,0,0)","text-transform":"none","text-orientation":"mixed","white-space":"normal","shape-padding":"0",isolation:"auto","mix-blend-mode":"normal","solid-color":"rgb(0,0,0)","solid-opacity":"1","vector-effect":"none","paint-order":"markers fill stroke",fill:"#000000",style:{fill:"rgb(158, 255, 79)"}})])],-1),Be={class:"cart__block"},qe=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),je={class:"cart__price"},Ye=["disabled","onClick"];function He(t,e,a,r,s,l){const c=(0,o.up)("router-link"),i=(0,o.up)("CartItem");return(0,o.wg)(),(0,o.iD)("main",De,[(0,o._)("div",xe,[(0,o._)("ul",ze,[(0,o._)("li",Fe,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),Te]),$e,(0,o._)("span",Ae,(0,_.zw)(t.amountProducts)+" Товар(ов/а) ",1)]),(0,o._)("section",Ue,[(0,o._)("form",Le,[(0,o._)("div",Ve,[(0,o._)("ul",Ee,[t.cartLoading?((0,o.wg)(),(0,o.iD)("div",Ke,Me)):t.cartLoadingFailed?((0,o.wg)(),(0,o.iD)("div",Oe,[We,(0,o.Uk)(" Не удалось загрузить корзину ")])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(i,{key:t.productId,item:t},null,8,["item"])))),128))])]),(0,o._)("div",Be,[qe,(0,o._)("p",je,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,_.zw)(l.totalPricePretty)+" ₽",1)]),(0,o.Wm)(c,{to:{name:"order"},customd:""},{default:(0,o.w5)((({navigate:e})=>[(0,o._)("button",{class:"cart__button button button--primery",type:"button",disabled:!t.totalPrice,onClick:e}," Оформить заказ",8,Ye)])),_:1})])])])])}const Ne={class:"cart__item product"},Ge={class:"product__pic"},Qe=["src","alt"],Re={class:"product__title"},Xe={class:"product__code"},Je={class:"product__counter form__counter"},ta=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),ea=[ta],aa=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),ra=[aa],oa={class:"product__price"},sa=(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),la=[sa];function ca(t,e,a,s,l,c){return(0,o.wg)(),(0,o.iD)("li",Ne,[(0,o._)("div",Ge,[(0,o._)("img",{src:a.item.product.image,width:"120",height:"120",alt:a.item.product.title},null,8,Qe)]),(0,o._)("h3",Re,(0,_.zw)(a.item.product.title),1),(0,o._)("span",Xe," Артикул: "+(0,_.zw)(a.item.productId),1),(0,o._)("div",Je,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(0,r.iM)((t=>c.amount-=1),["prevent"]))},ea),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>c.amount=t),name:"count"},null,512),[[r.nr,c.amount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(0,r.iM)((t=>c.amount+=1),["prevent"]))},ra)]),(0,o._)("b",oa,(0,_.zw)(c.totalPricePretty)+" ₽ ",1),(0,o._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[3]||(e[3]=(0,r.iM)(((...t)=>c.deleteProduct&&c.deleteProduct(...t)),["prevent"]))},la)])}var ia={props:["item"],computed:{totalPricePretty(){return N(this.item.amount*this.item.product.price)},amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.productId,amount:t})}}},methods:{...(0,w.nv)(["deleteProductFromCart"]),deleteProduct(){this.deleteProductFromCart({productId:this.item.product.id})}}};const na=(0,v.Z)(ia,[["render",ca]]);var da=na,ua={components:{CartItem:da},computed:{...(0,w.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice",amountProducts:"cartAmountProducts"}),totalPricePretty(){return N(this.totalPrice)},...(0,w.rn)(["cartLoading","cartLoadingFailed"])}};const _a=(0,v.Z)(ua,[["render",He]]);var pa=_a;const ma={class:"content container"},ha={class:"content__top"},fa={class:"breadcrumbs"},ga={class:"breadcrumbs__item"},ba={class:"breadcrumbs__item"},va=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ya=(0,o._)("h1",{class:"content__title"}," Корзина ",-1),ka=(0,o._)("span",{class:"content__info"}," 3 товара ",-1),wa={class:"cart"},Pa={class:"cart__field"},Ia={class:"cart__data"},Ca=(0,o.uE)('<div class="cart__options"><h3 class="cart__title">Доставка</h3><ul class="cart__options options"><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="delivery" value="0" checked="true"><span class="options__value"> Самовывоз <b>бесплатно</b></span></label></li><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="delivery" value="500"><span class="options__value"> Курьером <b>500 ₽</b></span></label></li></ul><h3 class="cart__title">Оплата</h3><ul class="cart__options options"><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="pay" value="card"><span class="options__value"> Картой при получении </span></label></li><li class="options__item"><label class="options__label"><input class="options__radio sr-only" type="radio" name="pay" value="cash"><span class="options__value"> Наличными при получении </span></label></li></ul></div>',1),Da={class:"cart__block"},xa={class:"cart__orders"},za=["item"],Fa={class:"cart__total"},Ta=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"500 ₽")],-1),$a=(0,o._)("button",{class:"cart__button button button--primery",type:"submit"}," Оформить заказ ",-1),Aa={key:0,class:"cart__error form__error-block"},Ua=(0,o._)("h4",null,"Заявка не отправлена!",-1),La={key:1},Va=(0,o._)("div",{class:"loader",id:"loader-1"},null,-1),Ea=(0,o._)("div",{class:"loading__text"},"Оформление заказа",-1),Ka=[Va,Ea],Sa={key:2},Za=(0,o._)("div",{class:"text__loaded"},"Заказ оформлен!",-1),Ma=[Za];function Oa(t,e,a,s,l,c){const i=(0,o.up)("router-link"),n=(0,o.up)("BaseFormText"),d=(0,o.up)("BaseFormTextarea");return(0,o.wg)(),(0,o.iD)("main",ma,[(0,o._)("div",ha,[(0,o._)("ul",fa,[(0,o._)("li",ga,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",ba,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),va]),ya,ka]),(0,o._)("section",wa,[(0,o._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>c.order&&c.order(...t)),["prevent"]))},[(0,o._)("div",Pa,[(0,o._)("div",Ia,[(0,o.Wm)(n,{modelValue:l.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.formData.name=t),error:l.formError.name,type:"text",title:"ФИО",placeholder:"Введите ваше имя"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:l.formData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>l.formData.address=t),error:l.formError.address,title:"Адрес доставки",placeholder:"Введите ваш адрес"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:l.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>l.formData.phone=t),error:l.formError.phone,type:"phone",title:"Телефон",placeholder:"Введите ваш телефон"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:l.formData.email,"onUpdate:modelValue":e[3]||(e[3]=t=>l.formData.email=t),error:l.formError.email,type:"email",title:"Email",placeholder:"Введите ваш Email"},null,8,["modelValue","error"]),(0,o.Wm)(d,{title:"Комментарии к заказу",modelValue:l.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>l.formData.comment=t),error:l.formError.comment,placeholder:"Ваши пожелания"},null,8,["modelValue","error"])]),Ca]),(0,o._)("div",Da,[(0,o._)("ul",xa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.productId,item:t},[(0,o._)("h3",null,(0,_.zw)(t.product.title),1),(0,o._)("b",null,(0,_.zw)(t.product.price*t.amount)+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,_.zw)(t.product.id),1)],8,za)))),128))]),(0,o._)("div",Fa,[Ta,(0,o._)("p",null,[(0,o.Uk)("Итого: "),(0,o._)("b",null,(0,_.zw)(t.products.length),1),(0,o.Uk)(" товар(а/ов) на сумму "),(0,o._)("b",null,(0,_.zw)(t.totalPrice)+" ₽",1)])]),$a]),l.formErrorMessage?((0,o.wg)(),(0,o.iD)("div",Aa,[Ua,(0,o._)("p",null,(0,_.zw)(l.formErrorMessage),1)])):(0,o.kq)("",!0),l.formSending?((0,o.wg)(),(0,o.iD)("div",La,Ka)):(0,o.kq)("",!0),l.formSend?((0,o.wg)(),(0,o.iD)("div",Sa,Ma)):(0,o.kq)("",!0)],32)])])}a(7658);const Wa=["type","placeholder"];function Ba(t,e,a,s,l,c){const i=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(i,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),type:a.type,placeholder:t.placeholder},null,8,Wa),[[r.YZ,t.dataValue]])])),_:1},8,["title","error"])}const qa={class:"form__label"},ja={class:"form__value"},Ya={key:0,class:"form__error"};function Ha(t,e,a,r,s,l){return(0,o.wg)(),(0,o.iD)("label",qa,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",ja,(0,_.zw)(a.title),1),a.error?((0,o.wg)(),(0,o.iD)("span",Ya,(0,_.zw)(a.error),1)):(0,o.kq)("",!0)])}var Na={props:["title","error"]};const Ga=(0,v.Z)(Na,[["render",Ha]]);var Qa=Ga,Ra={props:["title","error","placeholder","modelValue"],components:{BaseFormField:Qa},computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},Xa={props:{type:{default:"text"}},mixins:[Ra]};const Ja=(0,v.Z)(Xa,[["render",Ba]]);var tr=Ja;const er=["placeholder"];function ar(t,e,a,s,l,c){const i=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(i,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{class:"form__input form__input--area","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),placeholder:t.placeholder},null,8,er),[[r.nr,t.dataValue]])])),_:1},8,["title","error"])}var rr={mixins:[Ra]};const or=(0,v.Z)(rr,[["render",ar]]);var sr=or,lr={components:{BaseFormText:tr,BaseFormTextarea:sr},data(){return{formData:{},formError:{},formErrorMessage:"",formSending:!1,formSend:!1}},computed:{...(0,w.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice",amountProducts:"cartAmountProducts"})},methods:{order(){this.formError={},this.formErrorMessage="",this.formSending=!0,Lt.ZP.post(`${Ut}/api/orders`,{...this.formData},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}}),this.formSending=!1,this.formSend=!0})).catch((t=>{this.formSending=!1,this.formError=t.response.data.error.request||[],this.formErrorMessage=t.response.data.error.message}))}}};const cr=(0,v.Z)(lr,[["render",Oa]]);var ir=cr;const nr={class:"content container"},dr=(0,o.uE)('<div class="content__top"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="index.html"> Каталог </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="cart.html"> Корзина </a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link"> Оформление заказа </a></li></ul><h1 class="content__title"> Заказ оформлен <span>№ 23621</span></h1></div>',1),ur={key:0},_r=(0,o._)("div",{class:"loader",id:"loader-1"},null,-1),pr=(0,o._)("div",{class:"loading__text"},"Загрузка информации",-1),mr=[_r,pr],hr={key:1,class:"cart"},fr={class:"cart__form form",action:"#",method:"POST"},gr={class:"cart__field"},br=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),vr={class:"dictionary"},yr={class:"dictionary__item"},kr=(0,o._)("span",{class:"dictionary__key"}," Получатель ",-1),wr={class:"dictionary__value"},Pr={class:"dictionary__item"},Ir=(0,o._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),Cr={class:"dictionary__value"},Dr={class:"dictionary__item"},xr=(0,o._)("span",{class:"dictionary__key"}," Телефон ",-1),zr={class:"dictionary__value"},Fr={class:"dictionary__item"},Tr=(0,o._)("span",{class:"dictionary__key"}," Email ",-1),$r={class:"dictionary__value"},Ar=(0,o._)("li",{class:"dictionary__item"},[(0,o._)("span",{class:"dictionary__key"}," Способ оплаты "),(0,o._)("span",{class:"dictionary__value"}," картой при получении ")],-1),Ur={class:"cart__block"},Lr={class:"cart__orders"},Vr=["item"],Er={class:"cart__total"},Kr=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"500 ₽")],-1);function Sr(t,e,a,r,s,l){return(0,o.wg)(),(0,o.iD)("main",nr,[dr,this.$store.state.orderInfo?this.$store.state.orderInfo?((0,o.wg)(),(0,o.iD)("section",hr,[(0,o._)("form",fr,[(0,o._)("div",gr,[br,(0,o._)("ul",vr,[(0,o._)("li",yr,[kr,(0,o._)("span",wr,(0,_.zw)(this.$store.state.orderInfo.name),1)]),(0,o._)("li",Pr,[Ir,(0,o._)("span",Cr,(0,_.zw)(this.$store.state.orderInfo.address),1)]),(0,o._)("li",Dr,[xr,(0,o._)("span",zr,(0,_.zw)(this.$store.state.orderInfo.phone),1)]),(0,o._)("li",Fr,[Tr,(0,o._)("span",$r,(0,_.zw)(this.$store.state.orderInfo.email),1)]),Ar])]),(0,o._)("div",Ur,[(0,o._)("ul",Lr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$store.state.orderInfo.basket.items,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.product.id,item:t},[(0,o._)("h3",null,(0,_.zw)(t.product.title),1),(0,o._)("b",null,(0,_.zw)(t.product.price*t.quantity)+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,_.zw)(t.product.id),1)],8,Vr)))),128))]),(0,o._)("div",Er,[Kr,(0,o._)("p",null,[(0,o.Uk)("Итого: "),(0,o._)("b",null,(0,_.zw)(this.$store.state.orderInfo.basket.items.length),1),(0,o.Uk)(" товар(а/ов) на сумму "),(0,o._)("b",null,(0,_.zw)(this.$store.state.orderInfo.totalPrice)+" ₽",1)])])])])])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ur,mr))])}var Zr={created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const Mr=(0,v.Z)(Zr,[["render",Sr]]);var Or=Mr;const Wr=[{name:"main",component:Ot,path:"/"},{name:"product",component:Ce,path:"/products/:id"},{name:"cart",component:pa,path:"/cart/"},{name:"order",component:ir,path:"/order/"},{name:"orderInfo",component:Or,path:"/order/:id"},{name:"notFound",component:jt,path:"/:pathMatch(.*)*"}],Br=(0,D.p7)({history:(0,D.r5)("/vue-app/"),routes:Wr});var qr=Br,jr=(0,w.MT)({state:{cartLoading:!1,cartLoadingFailed:!1,cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:null},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{productId:e,amount:a}){const r=t.cartProducts.find((t=>t.productId===e));r&&(r.amount=a)},deleteCartProduct(t,e){t.cartProducts=t.cartProducts.filter((t=>t.productId!==e))},updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const a=t.cartProductsData.find((t=>t.product.id===e.productId)).product;return{...e,product:{...a,image:a.image.file.url}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},cartAmountProducts(t,e){return e.cartDetailProducts.length}},actions:{loadOrderInfo(t,e){return Lt.ZP.get(`${Ut}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",e.data)}))},loadCart(t){t.state.cartLoading=!0,t.state.cartLoadingFailed=!1,Lt.ZP.get(`${Ut}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).catch((()=>t.state.cartLoadingFailed=!0)).then((e=>{t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")})).then((()=>t.state.cartLoading=!1))},addProductToCart(t,{productId:e,amount:a}){return Lt.ZP.post(`${Ut}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))},updateCartProductAmount(t,{productId:e,amount:a}){if(t.commit("updateCartProductAmount",{productId:e,amount:a}),!(a<1))return Lt.ZP.put(`${Ut}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items)})).catch((()=>{t.commit("syncCartProducts")}))},deleteProductFromCart(t,{productId:e}){return Lt.ZP["delete"](`${Ut}/api/baskets/products`,{data:{productId:e},params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")}))}}});const Yr=(0,r.ri)({render:()=>(0,o.h)(C)});Yr.use(qr),Yr.use(jr),Yr.mount("#app")}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,o,s){if(!r){var l=1/0;for(d=0;d<t.length;d++){r=t[d][0],o=t[d][1],s=t[d][2];for(var c=!0,i=0;i<r.length;i++)(!1&s||l>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[i])}))?r.splice(i--,1):(c=!1,s<l&&(l=s));if(c){t.splice(d--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,l=r[0],c=r[1],i=r[2],n=0;if(l.some((function(e){return 0!==t[e]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(i)var d=i(a)}for(e&&e(r);n<l.length;n++)s=l[n],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunkvue_3"]=self["webpackChunkvue_3"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5071)}));r=a.O(r)})();
//# sourceMappingURL=app.360e8ea6.js.map